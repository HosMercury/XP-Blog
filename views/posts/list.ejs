<%- include('../partials/header') %>
<a href="/posts/add" class="post-add"><i class="fas fa-plus"></i></a>
<h1>Posts</h1>

<ul>
  <% if(posts.length < 1) { %>
  <p>No posts yet</p>
  <% } else { %> <% posts.forEach(post => { %>
  <li class="post">
    <article>
      <a href="/posts/<%= post.id %>" class="post-link">
        <h2 class="post-header"><%= post.title %></h2></a
      >
      <h5 class="post-author"><%= post.user_id %></h5>
      <h5 class="post-date"><%= post.created_at.toDateString() %></h5>
      <p class="post-content"><%= post.content.substring(0,10) + ' ...'%></p>
    </article>
  </li>
  <% }) }%>
</ul>
<!-- pagination -->
<section class="pagination">
  <% if(p > 1){ %>
  <a href="/posts/?p=<%=parseInt(p)-1%>" class="page"><</a>
  <% } %>
  <!-- pages numbers -->
  <% for(i = 0; i < pages; i++) {%>
  <a href="/posts/?p=<%=i+1%> " class="page"> <%=i+1%> </a>
  <%}%>
  <!--  -->
  <% if(p < pages){ %>
  <a href="/posts/?p=<%=parseInt(p)+1%>" class="page">></a>
  <% } %>
</section>

<script>
  function deletePost() {
    alert('delete');
  }

  function editPost() {}
</script>

<%- include('../partials/footer') %>
