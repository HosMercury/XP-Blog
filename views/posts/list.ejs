<%- include('../partials/header') %>
<a href="/posts/add" class="post-add"><i class="fas fa-plus"></i></a>
<h1>Posts</h1>

<ul>
  <% if(posts.length < 1) { %>
  <p>No posts yet</p>
  <% } else { %> <% posts.forEach(post => { %>
  <li class="post">
    <article>
      <a href="/posts/<%= post.id %>" class="post-link">
        <h2 class="post-header"><%= post.title %></h2></a
      >
      <h5 class="post-author"><%= post.user_id %></h5>
      <h5 class="post-date"><%= post.created_at.toDateString() %></h5>
      <p class="post-content"><%= post.content.substring(0,10) + ' ...'%></p>
    </article>
  </li>
  <% }) }%>
</ul>
<!-- pagination -->
<ul class="pagination">
  <% if(pagesCount > 1) { %>
  <!----->
  <% if(pageNumber > 1){ %>
  <li class="page">
    <a href="/posts/?p=1">First</a>
  </li>
  <% } %>
  <!-- back -->
  <% if(pageNumber > 1){ %>
  <li class="page">
    <a href="/posts/?p=<%=parseInt(pageNumber)-1%>">Previous</a>
  </li>
  <% } %>

  <!-- pages numbers -->
  <% if(pagesCount < maxDisplayPagesNumbers) {%>
  <!------>
  <% for(i = 1; i <= pagesCount; i++) {%>
  <li class="page <%= pageNumber == i ? 'current-page':'' %>">
    <a href="/posts/?p=<%=i%> "> <%=i%> </a>
  </li>
  <%}%>
  <!------>
  <%} else {%>
  <!--  -->
  <li class="page current-page">
    <a href="/posts/?p=<%=pageNumber%>"> <%=pageNumber%> </a>
  </li>
  <%}%>
  <!----->

  <% if(pageNumber < pagesCount){ %>
  <li class="page">
    <a href="/posts/?p=<%=parseInt(pageNumber)+1%>">Next</a>
  </li>
  <% if(pagesCount >1){ %>
  <li class="page">
    <a href="/posts/?p=<%=parseInt(pagesCount)%>">Last</a>
  </li>
  <% } %> <% } %> <% } %>
</ul>

<script>
  function deletePost() {
    alert('delete');
  }

  function editPost() {}
</script>

<%- include('../partials/footer') %>
